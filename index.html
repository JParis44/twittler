<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="normalize.css">
		<link rel="stylesheet" type="text/css" href="main.css">
		<script src="jquery.js"></script>
		<script src="data_generator.js"></script>
	</head>
	<body>
		<div class="main-wrapper">
			
			<div class="header-wrapper">
			<div class="header">
				<h1>Twittler</h1>
			</div>
			</div>
			
			<div class="left-column-wrapper">
			<div class="left-column">
				<div id="user-list"></div>
			</div>
			</div>

			<div class="content-wrapper">
			<div class="content">
				<div id="tweet-box"></div>
			</div>
			</div>
		
		</div>
		<script>

			$(document).ready(function(){
				//var $body = $('body');
				//$body.html('');
				var $tweetBox = $('#tweet-box');

				var updateTweetBox = function () {

					$tweetBox.html('');

					var index = streams.home.length - 1;
					
					while(index >= 0){
						var tweet = streams.home[index];
						var $tweet = $('<div class="tweet"><p class="text"></p><p class="timestamp"></p></div>');
						$tweet.children().first().text('@' + tweet.user + ': ' + tweet.message);
						$tweet.children().last().text(tweet.created_at.toLocaleTimeString() + ' | ' + tweet.created_at.toLocaleDateString());
						$tweet.appendTo($tweetBox);
						index -= 1;
					}

					setTimeout(updateTweetBox, 2000);
				};

				var updateUserList = function () {
					
					users.forEach(function (user) {
						var $user = $('<div class= "user" data-user=""></div>');
						$user.data(user);
						$user.text('@' + user);
						$user.appendTo('#user-list');
					});
				};

				updateUserList();
				updateTweetBox();

			});

		</script>
	</body>
</html>
